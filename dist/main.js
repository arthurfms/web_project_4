!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._selector=e,this._popup=document.querySelector(".".concat(e)),this._closeButton=this._popup.querySelector(".".concat(e,"__close-button"))}var n,o;return n=t,(o=[{key:"open",value:function(){this._popup.classList.add("".concat(this._selector,"_opened"))}},{key:"close",value:function(){this._popup.classList.remove("".concat(this._selector,"_opened"))}},{key:"_handleEscClose",value:function(e){"Escape"==e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;document.addEventListener("keyup",(function(t){e._handleEscClose(t)})),this._popup.addEventListener("click",(function(t){t.target.classList.contains("".concat(e._selector,"_opened"))&&e.close()})),this._closeButton.addEventListener("click",(function(){e.close()}))}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}var t,o;return t=e,(o=[{key:"setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleSubmitButton(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSubmitButton()}))}))}},{key:"_toggleSubmitButton",value:function(){this._hasInvalidInput(this._inputList)?this._buttonElement.classList.add(this._inactiveButtonClass):this._buttonElement.classList.remove(this._inactiveButtonClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}}])&&n(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=u(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},c.apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,e);var t,n,o,r,u=(o=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(o);if(r){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=u.call(this,e))._image=t._popup.querySelector(".image-popup__image"),t._subtitle=t._popup.querySelector(".image-popup__subtitle"),t}return t=f,(n=[{key:"open",value:function(e,t){this._image.src=e,this._image.alt=t,this._subtitle.textContent=t,c(l(f.prototype),"open",this).call(this)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(t),p=[{name:"Vale de Yosemite",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lago Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Montanhas Carecas",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Parque Nacional da Vanoise ",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],_=document.querySelector(".info__edit-button"),d=document.querySelector(".add-button"),y=new f("image-popup"),h=document.querySelector(".info__name"),m=document.querySelector(".info__job"),v=document.querySelector("#name-input"),b=document.querySelector("#job-input"),g=(document.querySelector(".popup_user"),document.querySelector(".popup_card"),{formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input_type_error_active"});function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function S(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(u,e);var t,n,r,i,c=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(i){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(e){var t,n=e.selector,o=e.sending;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,n))._form=document.querySelector(".".concat(t._selector)).querySelector(".form"),t._inputsList=t._form.querySelectorAll(".form__input"),t._inputs={},t._closeButton=document.querySelector(".".concat(t._selector)).querySelector(".popup__close-button"),t._sendButton=t._form.querySelector(".form__submit"),t._sending=o,t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputsList.forEach((function(t){var n=t.id;e._inputs["".concat(n)]=t.value})),this._inputs}},{key:"open",value:function(){new o(g,this._form).setEventListeners(),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),this._inputsList.forEach((function(e){e.value=""}))}},{key:"setEventListeners",value:function(){var e=this;document.addEventListener("keyup",(function(t){e._handleEscClose(t)})),this._popup.addEventListener("click",(function(t){t.target.classList.contains("popup_opened")&&e.close()})),this._closeButton.addEventListener("click",(function(){e.close()})),this._sendButton.addEventListener("click",(function(t){t.preventDefault(),e._sending()})),document.addEventListener("keydown",(function(t){"Enter"==t.key&&e._sendButton.classList.contains("form__submit_inactive")&&t.preventDefault()}))}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(t);function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var O=function(){function e(t,n,o){var r=o.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=t.name,this._image=t.link,this._cardSelector=n,this._isLiked=!1,this.handleCardClick=r}var t,n;return t=e,(n=[{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._setImage(),this._setTitle(),this._element}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_setImage",value:function(){var e=this._element.querySelector(".card__image");e.src=this._image,e.alt=this._title}},{key:"_setTitle",value:function(){this._element.querySelector(".card__title").textContent=this._title}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__like-button").addEventListener("click",(function(){e._handleLike()})),this._element.querySelector(".card__trash-icon").addEventListener("click",(function(){e._deleteCard()})),this._element.querySelector(".card__image").addEventListener("click",(function(){y.open(e._image,e._title),y.setEventListeners()}))}},{key:"_handleLike",value:function(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active"),this._isLiked=!this._isLiked}},{key:"_deleteCard",value:function(){this._element.remove()}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var P=function(){function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=o,this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var I=function(){function e(t){var n=t.user;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n.name,this._userJob=n.job}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName,job:this._userJob}}},{key:"setUserInfo",value:function(){var e=document.querySelector(".info__name"),t=document.querySelector(".info__job");e.textContent=this._userName,t.textContent=this._userJob}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=new P({items:p,renderer:function(e){var t=new O(e,"#card__template",{handleCardClick:function(){t.addEventListener("click",(function(){y.open(t._link,t._title)}))}});x.addItem(t.generateCard())}},".elements");x.renderItems(),_.addEventListener("click",(function(){var e=new j({selector:"popup_user",sending:function(){var t=e._getInputValues();console.log(t["name-input"]),console.log(t["job-input"]),t["name-input"],t["job-input"],new I({name:t["name-input"],job:t["job-input"]}),h.textContent=t["name-input"],m.textContent=t["job-input"],e.close(),v.value=t["name-input"],b.value=t["job-input"]}});e.open(),e.setEventListeners()})),d.addEventListener("click",(function(){var e=new j({selector:"popup_card",sending:function(){var t=e._getInputValues();p.push({name:t["title-input"],link:t["image-input"]});var n=new O(p[p.length-1],"#card__template",{handleCardClick:function(){n.addEventListener("click",(function(){y.open(n._link,n._title)}))}});x.addItem(n.generateCard()),e.close()}});e.open(),e.setEventListeners()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWUsQ0FDbEN0RSxTQUFVLGFBQ1Z1RSxRQUFTLFdBQ1AsSUFBTXFELEVBQVNELEVBQVNFLGtCQUN4QkMsUUFBUUMsSUFBSUgsRUFBTyxlQUNuQkUsUUFBUUMsSUFBSUgsRUFBTyxjQUNPQSxFQUFPLGNBQW9CQSxFQUFPLGFBQzlDLElBQUlkLEVBQVMsQ0FBQ2pELEtBQU0rRCxFQUFPLGNBQWVWLElBQUtVLEVBQU8sZUFDcEUxRCxFQUFTZCxZQUFjd0UsRUFBTyxjQUM5QnpELEVBQVFmLFlBQWN3RSxFQUFPLGFBQzdCRCxFQUFTL0csUUFDVHdELEVBQVVXLE1BQVE2QyxFQUFPLGNBQ3pCdkQsRUFBU1UsTUFBUTZDLEVBQU8sWUFDekIsSUFJSEQsRUFBU3hCLE9BQ1R3QixFQUFTM0MsbUJBQ1YsSUFFRGhCLEVBQWNuRCxpQkFBaUIsU0FFL0IsV0FDRSxJQUFNbUgsRUFBVSxJQUFJMUQsRUFBZSxDQUNqQ3RFLFNBQVUsYUFDVnVFLFFBQVMsV0FDUCxJQUFNcUQsRUFBU0ksRUFBUUgsa0JBQ3ZCakUsRUFBTXFFLEtBQUssQ0FBQ3BFLEtBQU0rRCxFQUFPLGVBQWdCOUQsS0FBTThELEVBQU8saUJBQ3RELElBQU1NLEVBQVUsSUFBSS9DLEVBQUt2QixFQUFNQSxFQUFNdUUsT0FBTyxHQUFJLGtCQUFtQixDQUNqRTdDLGdCQUFpQixXQUNmNEMsRUFBUXJILGlCQUFpQixTQUFTLFdBQ2hDb0QsRUFBV2tDLEtBQUsrQixFQUFRWCxNQUFPVyxFQUFRM0MsT0FDeEMsR0FDRixJQUVIOEIsRUFBWUcsUUFBUVUsRUFBUVQsZ0JBQzVCTyxFQUFRcEgsT0FDVCxJQUVIb0gsRUFBUTdCLE9BQ1I2QixFQUFRaEQsbUJBQ1QsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3lhbmRleC5wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybXMuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFjdGljdW0vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtzZWxlY3Rvcn1gKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihgLiR7c2VsZWN0b3J9X19jbG9zZS1idXR0b25gKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKGAke3RoaXMuX3NlbGVjdG9yfV9vcGVuZWRgKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShgJHt0aGlzLl9zZWxlY3Rvcn1fb3BlbmVkYCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoZXZ0KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGAke3RoaXMuX3NlbGVjdG9yfV9vcGVuZWRgKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtU2VsZWN0b3JzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcnMuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGZvcm1TZWxlY3RvcnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gZm9ybVNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBmb3JtU2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBmb3JtU2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBmb3JtU2VsZWN0b3JzLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9O1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtcG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fc3VidGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLXBvcHVwX19zdWJ0aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaW1hZ2UsIHRpdGxlKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBpbWFnZTtcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRpdGxlO1xyXG4gICAgdGhpcy5fc3VidGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwV2l0aEltYWdlIH07XHJcbiIsImltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuXHJcblxyXG4gY29uc3QgY2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYWxlIGRlIFlvc2VtaXRlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJNb250YW5oYXMgQ2FyZWNhc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkYSBWYW5vaXNlIFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuIGNvbnN0IGVkaXRVc2VyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmZvX19lZGl0LWJ1dHRvblwiKTtcclxuIGNvbnN0IGFkZFVzZXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1idXR0b25cIik7XHJcbiBjb25zdCBJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiaW1hZ2UtcG9wdXBcIik7XHJcbiBjb25zdCB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5mb19fbmFtZVwiKTtcclxuIGNvbnN0IHVzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmluZm9fX2pvYlwiKTtcclxuIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKTtcclxuIGNvbnN0IGpvYklucHV0ID1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2pvYi1pbnB1dFwiKTtcclxuIGNvbnN0IHVzZXJQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdXNlclwiKTtcclxuIGNvbnN0IGNhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfY2FyZFwiKTtcclxuIGNvbnN0IGZvcm1TZWxlY3RvcnMgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcblxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcblxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXRcIixcclxuXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXRfaW5hY3RpdmVcIixcclxuXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuXHJcbiBleHBvcnQge2NhcmRzLCBlZGl0VXNlckJ1dHRvbiwgYWRkVXNlckJ1dHRvbiwgSW1hZ2VQb3B1cCwgdXNlck5hbWUsIHVzZXJKb2IsIG5hbWVJbnB1dCwgam9iSW5wdXQsIHVzZXJQb3B1cCwgY2FyZFBvcHVwLCBmb3JtU2VsZWN0b3JzfTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4vRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQge2NhcmRzLCBlZGl0VXNlckJ1dHRvbiwgYWRkVXNlckJ1dHRvbiwgSW1hZ2VQb3B1cCwgdXNlck5hbWUsIHVzZXJKb2IsIG5hbWVJbnB1dCwgam9iSW5wdXQsIGZvcm1MaXN0LCB1c2VyUG9wdXAsIGNhcmRQb3B1cCwgZm9ybVNlbGVjdG9yc30gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcblxyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybXMgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBzZWxlY3Rvciwgc2VuZGluZyB9KSB7XHJcbiAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5fc2VsZWN0b3J9YCkucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRzTGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2lucHV0cyA9IHt9O1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9zZWxlY3Rvcn1gKS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9zZW5kQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3N1Ym1pdFwiKTtcclxuICAgIHRoaXMuX3NlbmRpbmcgPSBzZW5kaW5nO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGlucHV0TmFtZSA9IGlucHV0LmlkO1xyXG4gICAgICB0aGlzLl9pbnB1dHNbYCR7aW5wdXROYW1lfWBdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dHM7XHJcbiAgfVxyXG4gIG9wZW4oKSB7XHJcbiAgICBjb25zdCBuZXdGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNlbGVjdG9ycywgdGhpcy5fZm9ybSk7XHJcbiAgICBuZXdGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgaXRlbS52YWx1ZSA9IFwiXCI7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZShldnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZW5kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9zZW5kaW5nKCk7XHJcbiAgICB9KTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYoZXZ0LmtleSA9PSBcIkVudGVyXCIgJiYgdGhpcy5fc2VuZEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19zdWJtaXRfaW5hY3RpdmVcIikpIHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5leHBvcnQgeyBQb3B1cFdpdGhGb3JtcyB9O1xyXG4iLCJpbXBvcnQgeyBJbWFnZVBvcHVwIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcblxyXG5jbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIHsgaGFuZGxlQ2FyZENsaWNrIH0pIHtcclxuICAgIHRoaXMuX3RpdGxlID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2UgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3NldEltYWdlKCk7XHJcbiAgICB0aGlzLl9zZXRUaXRsZSgpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0SW1hZ2UoKSB7XHJcbiAgICBjb25zdCBpbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIGltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgaW1hZ2UuYWx0ID0gdGhpcy5fdGl0bGU7XHJcbiAgfVxyXG5cclxuICBfc2V0VGl0bGUoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xyXG4gICAgICB9KTtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtaWNvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9kZWxldGVDYXJkKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBJbWFnZVBvcHVwLm9wZW4odGhpcy5faW1hZ2UsIHRoaXMuX3RpdGxlKTtcclxuICAgICAgICBJbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9ICF0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ2FyZCB9O1xyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCB7IFNlY3Rpb24gfTtcclxuIiwiY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdXNlciB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXIubmFtZTtcclxuICAgIHRoaXMuX3VzZXJKb2IgPSB1c2VyLmpvYjtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLl91c2VyTmFtZSwgam9iOiB0aGlzLl91c2VySm9iIH07XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgbmFtZVBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmZvX19uYW1lXCIpO1xyXG4gICAgY29uc3Qgam9iUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmluZm9fX2pvYlwiKTtcclxuXHJcbiAgICBuYW1lUGxhY2UudGV4dENvbnRlbnQgPSB0aGlzLl91c2VyTmFtZTtcclxuICAgIGpvYlBsYWNlLnRleHRDb250ZW50ID0gdGhpcy5fdXNlckpvYjtcclxuICB9XHJcbn1cclxuZXhwb3J0IHsgVXNlckluZm8gfTtcclxuIiwiaW1wb3J0IFwiLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybXMgfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1zLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQge2NhcmRzLCBlZGl0VXNlckJ1dHRvbiwgYWRkVXNlckJ1dHRvbiwgSW1hZ2VQb3B1cCwgdXNlck5hbWUsIHVzZXJKb2IsIG5hbWVJbnB1dCwgam9iSW5wdXQsIGZvcm1MaXN0LCB1c2VyUG9wdXAsIGNhcmRQb3B1cCwgZm9ybVNlbGVjdG9yc30gZnJvbSBcIi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGNhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIFwiI2NhcmRfX3RlbXBsYXRlXCIsIHtcclxuICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgSW1hZ2VQb3B1cC5vcGVuKGNhcmQuX2xpbmssIGNhcmQuX3RpdGxlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZC5nZW5lcmF0ZUNhcmQoKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuZWxlbWVudHNcIlxyXG4pO1xyXG5cclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcblxyXG5cclxuZWRpdFVzZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBVc2VyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3Jtcyh7XHJcbiAgICBzZWxlY3RvcjogXCJwb3B1cF91c2VyXCIsXHJcbiAgICBzZW5kaW5nOiAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlucHV0cyA9IFVzZXJGb3JtLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICBjb25zb2xlLmxvZyhpbnB1dHNbXCJuYW1lLWlucHV0XCJdKTtcclxuICAgICAgY29uc29sZS5sb2coaW5wdXRzW1wiam9iLWlucHV0XCJdKTtcclxuICAgICAgY29uc3QgdXNlcklucHV0cyA9IHtuYW1lOiBpbnB1dHNbXCJuYW1lLWlucHV0XCJdLCBqb2I6IGlucHV0c1tcImpvYi1pbnB1dFwiXX07XHJcbiAgICAgIGNvbnN0IHVzZXIxID0gbmV3IFVzZXJJbmZvKHtuYW1lOiBpbnB1dHNbXCJuYW1lLWlucHV0XCJdLCBqb2I6IGlucHV0c1tcImpvYi1pbnB1dFwiXX0pO1xyXG4gICAgICB1c2VyTmFtZS50ZXh0Q29udGVudCA9IGlucHV0c1tcIm5hbWUtaW5wdXRcIl07XHJcbiAgICAgIHVzZXJKb2IudGV4dENvbnRlbnQgPSBpbnB1dHNbXCJqb2ItaW5wdXRcIl07XHJcbiAgICAgIFVzZXJGb3JtLmNsb3NlKCk7XHJcbiAgICAgIG5hbWVJbnB1dC52YWx1ZSA9IGlucHV0c1tcIm5hbWUtaW5wdXRcIl07XHJcbiAgICAgIGpvYklucHV0LnZhbHVlID0gaW5wdXRzW1wiam9iLWlucHV0XCJdO1xyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgXHJcbiAgVXNlckZvcm0ub3BlbigpO1xyXG4gIFVzZXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbn0pO1xyXG5cclxuYWRkVXNlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2V0QWRkQnV0dG9uKTtcclxuXHJcbmZ1bmN0aW9uIHNldEFkZEJ1dHRvbigpIHtcclxuICBjb25zdCBBZGRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm1zKHtcclxuICAgIHNlbGVjdG9yOiBcInBvcHVwX2NhcmRcIixcclxuICAgIHNlbmRpbmc6ICgpID0+IHtcclxuICAgICAgY29uc3QgaW5wdXRzID0gQWRkRm9ybS5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgY2FyZHMucHVzaCh7bmFtZTogaW5wdXRzW1widGl0bGUtaW5wdXRcIl0sIGxpbms6IGlucHV0c1tcImltYWdlLWlucHV0XCJdfSk7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChjYXJkc1tjYXJkcy5sZW5ndGgtMV0sIFwiI2NhcmRfX3RlbXBsYXRlXCIsIHtcclxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgIG5ld0NhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgSW1hZ2VQb3B1cC5vcGVuKG5ld0NhcmQuX2xpbmssIG5ld0NhcmQuX3RpdGxlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCkpO1xyXG4gICAgICBBZGRGb3JtLmNsb3NlKCk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG4gIEFkZEZvcm0ub3BlbigpO1xyXG4gIEFkZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxufVxyXG4iXSwibmFtZXMiOlsiUG9wdXAiLCJzZWxlY3RvciIsInRoaXMiLCJfc2VsZWN0b3IiLCJfcG9wdXAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfY2xvc2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJldnQiLCJrZXkiLCJjbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtU2VsZWN0b3JzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsIl90b2dnbGVTdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ0ZXh0Q29udGVudCIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlIiwiX3N1YnRpdGxlIiwiaW1hZ2UiLCJ0aXRsZSIsInNyYyIsImFsdCIsImNhcmRzIiwibmFtZSIsImxpbmsiLCJlZGl0VXNlckJ1dHRvbiIsImFkZFVzZXJCdXR0b24iLCJJbWFnZVBvcHVwIiwidXNlck5hbWUiLCJ1c2VySm9iIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJQb3B1cFdpdGhGb3JtcyIsInNlbmRpbmciLCJfZm9ybSIsIl9pbnB1dHNMaXN0IiwiX2lucHV0cyIsIl9zZW5kQnV0dG9uIiwiX3NlbmRpbmciLCJpbnB1dCIsImlucHV0TmFtZSIsInZhbHVlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJpdGVtIiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl90aXRsZSIsIl9jYXJkU2VsZWN0b3IiLCJfaXNMaWtlZCIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3NldEltYWdlIiwiX3NldFRpdGxlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9oYW5kbGVMaWtlIiwiX2RlbGV0ZUNhcmQiLCJvcGVuIiwidG9nZ2xlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIlVzZXJJbmZvIiwidXNlciIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwiam9iIiwibmFtZVBsYWNlIiwiam9iUGxhY2UiLCJjYXJkU2VjdGlvbiIsImNhcmQiLCJfbGluayIsImFkZEl0ZW0iLCJnZW5lcmF0ZUNhcmQiLCJyZW5kZXJJdGVtcyIsIlVzZXJGb3JtIiwiaW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiY29uc29sZSIsImxvZyIsIkFkZEZvcm0iLCJwdXNoIiwibmV3Q2FyZCIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=